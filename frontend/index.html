<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Meteoro.xyz</title>

  <!-- Google Fonts - Orbitron -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: linear-gradient(180deg, #4A148C 0%, #000000 100%);
    }

    .container {
      width: 100vw;
      height: 100vh;
      position: relative;
    }

    /* Instant preloader - shows before JS loads */
    #preloader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.3s ease-out;
    }

    #preloader.hidden {
      opacity: 0;
      pointer-events: none;
    }

    #preloader-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 48px;
      font-weight: bold;
      color: #E0F6FF;
      text-shadow: 3px 3px 6px #003366;
      -webkit-text-stroke: 2px #0066CC;
      margin-bottom: 40px;
    }

    #preloader-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(0, 255, 255, 0.2);
      border-top: 4px solid #00FFFF;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>

<body>
  <!-- Instant preloader - visible immediately before JS loads -->
  <div id="preloader">
    <div id="preloader-title">LOADING GAME</div>
    <div id="preloader-spinner"></div>
  </div>
  <div class="container"></div>
  <!-- Main content expanded to fill most of the screen -->
  <div style="display: flex; justify-content: center; align-items: center; height: 100vh; width: 100vw;">
    <!-- Card Display Section - much larger -->
  </div>
  <script>
    // WebAuthn Polyfill for Rise Wallet SDK
    // Fixes "publicKey.pubKeyCredParams is missing" error by injecting default algorithms
    if (navigator.credentials && navigator.credentials.create) {
      const originalCreate = navigator.credentials.create;
      navigator.credentials.create = async function (options) {
        if (options && options.publicKey) {
          if (!options.publicKey.pubKeyCredParams) {
            options.publicKey.pubKeyCredParams = [];
          }
          const params = options.publicKey.pubKeyCredParams;
          // Ensure ES256 (-7) is present
          if (!params.some(p => p.alg === -7)) {
            console.log("[Polyfill] Injecting ES256 for WebAuthn");
            params.push({ alg: -7, type: "public-key" });
          }
          // Ensure RS256 (-257) is present
          if (!params.some(p => p.alg === -257)) {
            console.log("[Polyfill] Injecting RS256 for WebAuthn");
            params.push({ alg: -257, type: "public-key" });
          }
        }
        return originalCreate.call(navigator.credentials, options);
      };
    }
  </script>
  <script type="module" src="/src/main.js"></script>
</body>

</html>